\begin{enumerate}
\item Combine deep and shallow migratory typing in a model; formulate and prove safety properties.
\item Implement the model via a Shallow Typed Racket; re-use the Typed Racket type system.
\item Compare the performance of the combined language to Typed Racket + Racket.
\end{enumerate}

\subsection{Challenge 1: Model}

We need a model that combines deep and shallow migratory typing.
The model must allow the definition of deep-typed code, shallow-typed code, and untyped code.
All three must be able to interact.

The primary goal of the model is to state and prove safety properties for each kind of type.
Deep types must be trustworthy in any context.
Shallow types must match the type-tag of values in shallow-typed contexts.
If the safety properties depend on any new extensions, the model must make these clear.
For example, shallow-typed code may need to accept proxied values from deep-typed code.

% primary = implementable?

A secondary goal of the model is to realize safety with few run-time checks.
We plan to identify methods that may (and may not) be used to reduce the necessary run-time checks.
Time-permitting, we plan to explore promising methods in the implementation.


\subsection{Challenge 2: Implementation}

An implementation must validate the model.
Racket is a natural target for such an implementation, because it fully supports deep migratory typing and partially supports shallow migratory typing.
What remains is to extend the partial support for shallow migratory typing and to combine the two styles according to the model.

The current partial support for shallow migratory typing must be extended to accomodate all Typed Racket types in an efficient manner.
New type-to-check translations must be defined for common types.
Shallow-typed code must compile about as quickly as deep-typed code; some overhead may arise from the pass that rewrites typed code, but anything more than a 10\% slowdown must be studied and explained.

FILL IN HERE

Time-permitting, the implementation may adapt the Typed Racket optimizer for shallow types and enable it in shallow code.
A shallow optimizer may trust type-tags and little more.
For example, it may specialize an application of \racketcode{+} to expect unboxed numbers.


\subsection{Challenge 3: Evaluation}


